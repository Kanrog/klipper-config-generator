<!--
Fairline Klipper Config Generator
Copyright (C) 2026  Kanrog

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see https://www.gnu.org/licenses/gpl-3.0.txt.
-->

  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fairline - Klipper Config Generator</title>
  <style>
    :root {
      /* Dark grey background tones */
      --bg-primary: #1a1a1a;
      --bg-secondary: #242424;
      --bg-tertiary: #2e2e2e;
      --bg-input: #1e1e1e;
      
      /* Text colors */
      --text-primary: #f0f0f0;
      --text-secondary: #999999;
      
      /* Fairline brand colors */
      --fairline-blue: #165294;
      --fairline-orange: #F88701;
      --fairline-purple: #981FAC;
      
      /* Primary accent - using orange for buttons/highlights */
      --accent: #F88701;
      --accent-hover: #ffA033;
      
      /* Secondary accent - purple for alternative highlights */
      --accent-secondary: #981FAC;
      --accent-secondary-hover: #b835c9;
      
      /* Status colors */
      --success: #4ade80;
      --warning: #fbbf24;
      
      /* Borders */
      --border: #3a3a3a;
      --border-light: #4a4a4a;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
    }
    
    .header-brand { display: flex; align-items: center; gap: 12px; }
    .header-logo { height: 36px; width: auto; }
    .header h1 { font-size: 1.4rem; color: var(--text-primary); display: flex; align-items: center; gap: 10px; }
    .header h1 span { color: var(--fairline-blue); }
    .header-actions { display: flex; gap: 10px; align-items: center; }
    .github-link { display: inline-flex; align-items: center; gap: 6px; text-decoration: none; }
    .github-link svg { flex-shrink: 0; }
    
    .main-container {
      flex: 1;
      display: grid;
      grid-template-columns: 300px minmax(400px, 1fr) minmax(500px, 45%);
      gap: 0;
      min-height: 0;
      overflow: hidden;
    }
    
    .left-column { background: var(--bg-secondary); border-right: 1px solid var(--border); overflow-y: auto; padding: 16px; }
    .center-column { background: var(--bg-primary); overflow-y: auto; padding: 16px; display: flex; flex-direction: column; gap: 16px; }
    .right-column { background: var(--bg-secondary); border-left: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; }
    
    .panel { background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border); overflow: hidden; }
    .panel-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; background: rgba(0,0,0,0.2); border-bottom: 1px solid var(--border); }
    .panel-title { font-size: 0.85rem; font-weight: 600; color: var(--accent-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
    .panel-body { padding: 14px; }
    .panel-actions { display: flex; gap: 6px; align-items: center; }
    .panel-actions button { padding: 3px 8px; font-size: 0.7rem; background: var(--bg-input); border: 1px solid var(--border); color: var(--text-secondary); border-radius: 4px; cursor: pointer; transition: all 0.15s; }
    .panel-actions button:hover { background: var(--accent); color: white; border-color: var(--accent); }
    
    .form-group { margin-bottom: 14px; }
    .form-group:last-child { margin-bottom: 0; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .form-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
    
    label { display: block; margin-bottom: 5px; color: var(--text-secondary); font-size: 0.8rem; font-weight: 500; }
    select, input[type="text"], input[type="number"] { width: 100%; padding: 8px 10px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 5px; color: var(--text-primary); font-size: 0.9rem; }
    select:focus, input:focus { outline: none; border-color: var(--accent); }
    input::placeholder { color: var(--text-secondary); opacity: 0.6; }
    .hint { font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px; font-style: italic; }
    
    .checkbox-row { display: flex; align-items: center; gap: 8px; padding: 8px 10px; background: var(--bg-input); border-radius: 5px; cursor: pointer; margin-top: 8px; }
    .checkbox-row input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--accent); }
    .checkbox-row label { margin: 0; cursor: pointer; color: var(--text-primary); font-size: 0.85rem; }
    
    .sub-options { margin-top: 10px; padding: 10px; background: var(--bg-input); border-radius: 5px; border: 1px solid var(--border); }
    .sub-options .form-group { margin-bottom: 8px; }
    
    .sections-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; height: 100%; align-content: start; }
    .section-category { background: var(--bg-tertiary); border-radius: 6px; border: 1px solid var(--border); overflow: hidden; }
    .section-category-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 10px; background: rgba(0,0,0,0.3); font-weight: 600; font-size: 0.75rem; color: var(--accent-secondary); text-transform: uppercase; letter-spacing: 0.3px; cursor: pointer; }
    .section-category-header:hover { background: rgba(248, 135, 1, 0.15); }
    .category-toggle { opacity: 0.6; font-size: 0.9rem; }
    .section-category-header:hover .category-toggle { opacity: 1; }
    .section-items { padding: 6px; max-height: 180px; overflow-y: auto; }
    .section-items::-webkit-scrollbar { width: 6px; }
    .section-items::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    .section-item { display: flex; align-items: center; gap: 6px; padding: 4px 6px; border-radius: 3px; transition: background 0.1s; }
    .section-item:hover { background: var(--bg-input); }
    .section-item input[type="checkbox"] { width: 14px; height: 14px; accent-color: var(--accent); flex-shrink: 0; }
    .section-item label { margin: 0; font-size: 0.8rem; color: var(--text-primary); cursor: pointer; font-family: 'Consolas', 'Monaco', monospace; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .section-item label.originally-commented { color: var(--text-secondary); font-style: italic; }
    
    .includes-container { display: grid; grid-template-columns: 1fr 280px; gap: 14px; }
    .includes-list { display: flex; flex-wrap: wrap; gap: 6px; align-content: flex-start; max-height: 120px; overflow-y: auto; padding: 4px; }
    .includes-empty { color: var(--text-secondary); font-size: 0.8rem; padding: 20px; text-align: center; width: 100%; }
    .include-item { display: flex; align-items: center; gap: 6px; padding: 5px 8px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; }
    .include-item.disabled { opacity: 0.5; }
    .include-item input[type="checkbox"] { width: 14px; height: 14px; accent-color: var(--success); }
    .include-name { font-family: 'Consolas', 'Monaco', monospace; color: var(--success); cursor: pointer; }
    .include-remove { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 0 2px; font-size: 1rem; line-height: 1; }
    .include-remove:hover { color: var(--accent); }
    .include-add-panel { display: flex; flex-direction: column; gap: 8px; }
    .include-add-panel select, .include-add-panel input { font-size: 0.85rem; padding: 7px 10px; }
    .include-add-panel .add-btn { padding: 7px 14px; background: var(--accent); border: none; border-radius: 5px; color: white; font-size: 0.8rem; cursor: pointer; transition: background 0.15s; }
    .include-add-panel .add-btn:hover { background: var(--accent-hover); }
    .include-row { display: flex; gap: 6px; }
    .include-row input { flex: 1; }
    
    .output-header { padding: 12px 16px; background: rgba(0,0,0,0.2); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
    .output-title { font-size: 0.85rem; font-weight: 600; color: var(--accent-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
    .output-body { flex: 1; padding: 16px; overflow: hidden; display: flex; flex-direction: column; }
    #output { flex: 1; width: 100%; background: var(--bg-input); border: 1px solid var(--border); border-radius: 6px; color: #165294; font-family: 'Consolas', 'Monaco', 'Fira Code', monospace; font-size: 0.875rem; padding: 16px; resize: none; line-height: 1.6; tab-size: 4; }
    #output:focus { outline: none; border-color: var(--accent); }
    
    .btn { padding: 10px 20px; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.15s; display: inline-flex; align-items: center; gap: 8px; }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: var(--accent-hover); transform: translateY(-1px); }
    .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
    .btn-secondary:hover { background: var(--accent); border-color: var(--accent); }
    .btn-reset { background: rgba(152, 31, 172, 0.15); color: var(--accent-secondary); border: 1px solid rgba(152, 31, 172, 0.4); }
    .btn-reset:hover { background: var(--accent-secondary); color: white; border-color: var(--accent-secondary); }
    .btn-sm { padding: 6px 12px; font-size: 0.8rem; }
    
    .file-upload-label { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 10px; background: var(--bg-input); border: 2px dashed var(--border); border-radius: 6px; cursor: pointer; font-size: 0.85rem; color: var(--text-secondary); transition: all 0.15s; margin-top: 12px; }
    .file-upload-label:hover { border-color: var(--accent); color: var(--accent); }
    .file-upload-label input[type="file"] { display: none; }
    #uploadedFileName { display: none; margin-top: 8px; padding: 6px 10px; background: rgba(74, 222, 128, 0.1); border: 1px solid var(--success); border-radius: 4px; font-size: 0.8rem; color: var(--success); }
    
    .driver-warning, .sensorless-warning { display: flex; gap: 10px; padding: 10px; background: rgba(233, 69, 96, 0.1); border: 1px solid var(--accent); border-radius: 6px; margin-top: 10px; }
    .warning-icon { font-size: 1.2rem; flex-shrink: 0; }
    .warning-content { font-size: 0.8rem; }
    .warning-content strong { color: var(--accent); display: block; margin-bottom: 4px; }
    .warning-content p { margin: 0; color: var(--text-secondary); line-height: 1.4; }
    .warning-content code { background: var(--bg-input); padding: 1px 4px; border-radius: 3px; font-family: monospace; }
    
    .driver-count-display { margin-top: 8px; }
    .driver-count { display: flex; flex-wrap: wrap; gap: 6px; padding: 8px; background: var(--bg-input); border-radius: 5px; font-size: 0.75rem; }
    .driver-count.warning { border: 1px solid var(--warning); }
    .count-label { color: var(--text-secondary); }
    .count-value { font-weight: 600; }
    .count-separator { color: var(--border-light); }
    .count-ok { color: var(--success); }
    .count-warning { color: var(--accent); }
    .badge { font-size: 0.7rem; padding: 2px 6px; background: var(--bg-input); border-radius: 10px; color: var(--text-secondary); }
    
    /* Secondary MCU Styles */
    .mcu-panel { display: flex; flex-direction: column; }
    .mcu-panel-body { max-height: 55vh; overflow-y: auto; }
    .mcu-panel-body::-webkit-scrollbar { width: 6px; }
    .mcu-panel-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    .mcu-list { display: flex; flex-direction: column; gap: 10px; padding-bottom: 10px; }
    .mcu-empty { text-align: center; color: var(--text-secondary); padding: 20px; font-size: 0.85rem; line-height: 1.5; }
    .mcu-item { background: var(--bg-input); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; transition: opacity 0.2s, border-color 0.2s; }
    .mcu-item:hover { border-color: var(--border-light); }
    .mcu-item.disabled { opacity: 0.5; }
    .mcu-item.disabled .mcu-item-body { pointer-events: none; }
    .mcu-item-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: rgba(0, 0, 0, 0.2); border-bottom: 1px solid var(--border); }
    .mcu-item-title { display: flex; align-items: center; gap: 8px; }
    .mcu-item-title input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--accent); }
    .mcu-type-icon { font-size: 1rem; }
    .mcu-display-name { font-weight: 600; font-size: 0.9rem; color: var(--text-primary); }
    .mcu-remove-btn { background: none; border: none; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; padding: 0 4px; line-height: 1; transition: color 0.15s; }
    .mcu-remove-btn:hover { color: var(--accent); }
    .mcu-item-body { padding: 12px; display: flex; flex-direction: column; gap: 10px; }
    .mcu-field { display: flex; flex-direction: column; gap: 4px; }
    .mcu-field label { font-size: 0.75rem; color: var(--text-secondary); font-weight: 500; }
    .mcu-field input, .mcu-field select { padding: 6px 10px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 0.85rem; }
    .mcu-field input:focus, .mcu-field select:focus { outline: none; border-color: var(--accent); }
    .mcu-field input[readonly] { opacity: 0.7; cursor: not-allowed; }
    .mcu-field .hint { font-size: 0.7rem; color: var(--text-secondary); font-style: italic; }
    .mcu-config-info { display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: rgba(0, 0, 0, 0.15); border-radius: 4px; font-size: 0.75rem; }
    .mcu-config-label { color: var(--text-secondary); }
    .mcu-config-file { color: var(--success); font-family: 'Consolas', 'Monaco', monospace; }
    
    /* MCU Functions Panel */
    .mcu-functions-panel { margin-top: 10px; border: 1px solid var(--border); border-radius: 6px; overflow: hidden; background: rgba(0,0,0,0.1); }
    .mcu-functions-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(0,0,0,0.2); cursor: pointer; transition: background 0.15s; }
    .mcu-functions-header:hover { background: rgba(248, 135, 1, 0.1); }
    .mcu-functions-title { font-size: 0.8rem; font-weight: 600; color: var(--text-primary); }
    .mcu-functions-summary { font-size: 0.85rem; }
    .mcu-func-none { color: var(--text-secondary); font-style: italic; font-size: 0.75rem; }
    .mcu-functions-toggle { color: var(--text-secondary); font-size: 0.7rem; }
    .mcu-functions-body { padding: 10px; display: flex; flex-direction: column; gap: 10px; }
    .mcu-func-category { background: var(--bg-secondary); border-radius: 5px; padding: 8px; }
    .mcu-func-category-header { display: flex; align-items: center; gap: 6px; margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
    .mcu-func-icon { font-size: 0.9rem; }
    .mcu-func-label { font-size: 0.75rem; font-weight: 600; color: var(--accent-secondary); text-transform: uppercase; letter-spacing: 0.3px; }
    .mcu-func-options { display: flex; flex-wrap: wrap; gap: 6px; }
    .mcu-func-option { display: flex; align-items: center; gap: 4px; padding: 4px 8px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 4px; font-size: 0.75rem; cursor: pointer; transition: all 0.15s; }
    .mcu-func-option:hover { border-color: var(--accent); }
    .mcu-func-option input[type="checkbox"] { width: 12px; height: 12px; accent-color: var(--success); margin: 0; }
    .mcu-func-option input[type="checkbox"]:checked + span { color: var(--success); }
    .mcu-func-option span { color: var(--text-secondary); }
    
    .mcu-add-panel { display: flex; flex-direction: column; gap: 10px; padding-top: 10px; border-top: 1px solid var(--border); }
    .mcu-add-panel select { padding: 8px 10px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 5px; color: var(--text-primary); font-size: 0.85rem; cursor: pointer; }
    .mcu-add-panel select:focus { outline: none; border-color: var(--accent); }
    .mcu-upload-row { display: flex; gap: 8px; }
    .mcu-upload { flex: 1; text-align: center; padding: 10px; font-size: 0.8rem; }
    
    /* MCU Modal */
    .mcu-modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
    .mcu-modal { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; width: 100%; max-width: 500px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); }
    .mcu-modal-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; background: var(--bg-tertiary); border-bottom: 1px solid var(--border); }
    .mcu-modal-header h3 { margin: 0; font-size: 1.1rem; color: var(--text-primary); }
    .mcu-modal-close { background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer; padding: 0; line-height: 1; transition: color 0.15s; }
    .mcu-modal-close:hover { color: var(--accent); }
    .mcu-modal-body { padding: 20px; overflow-y: auto; flex: 1; }
    .mcu-modal-description { margin: 0 0 16px 0; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; }
    .mcu-modal-body .form-group { margin-bottom: 16px; }
    .mcu-modal-body label { display: block; margin-bottom: 6px; font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; }
    .mcu-modal-body input[type="text"] { width: 100%; padding: 10px 12px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 5px; color: var(--text-primary); font-size: 0.9rem; }
    .mcu-modal-body input:focus { outline: none; border-color: var(--accent); }
    .mcu-modal-body .hint { font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px; font-style: italic; }
    .board-select-list { width: 100%; background: var(--bg-input); border: 1px solid var(--border); border-radius: 5px; color: var(--text-primary); font-size: 0.85rem; margin-top: 8px; }
    .board-select-list option { padding: 8px 10px; }
    .mcu-modal-divider { display: flex; align-items: center; margin: 16px 0; color: var(--text-secondary); font-size: 0.8rem; }
    .mcu-modal-divider::before, .mcu-modal-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
    .mcu-modal-divider span { padding: 0 12px; }
    .expansion-upload { width: 100%; text-align: center; }
    .uploaded-file-name { margin-top: 8px; padding: 8px; background: rgba(74, 222, 128, 0.1); border: 1px solid var(--success); border-radius: 4px; color: var(--success); font-size: 0.85rem; display: none; }
    .mcu-modal-footer { display: flex; justify-content: flex-end; gap: 10px; padding: 16px 20px; background: var(--bg-tertiary); border-top: 1px solid var(--border); }
    
    /* Responsive */
    @media (max-width: 1400px) { .main-container { grid-template-columns: 280px minmax(350px, 1fr) minmax(400px, 42%); } .sections-grid { grid-template-columns: 1fr; } }
    @media (max-width: 1100px) { .main-container { grid-template-columns: 260px 1fr; grid-template-rows: 1fr 1fr; } .center-column { grid-row: 1; grid-column: 2; } .right-column { grid-row: 2; grid-column: 1 / -1; border-left: none; border-top: 1px solid var(--border); max-height: 350px; } .includes-container { grid-template-columns: 1fr; } }
    @media (max-width: 800px) { .main-container { grid-template-columns: 1fr; grid-template-rows: auto auto 1fr; } .left-column, .center-column, .right-column { border: none; max-height: none; } .right-column { min-height: 300px; } .header-brand { gap: 8px; } .header-logo { height: 28px; } .header h1 { font-size: 1.1rem; } }
    
    /* Disclaimer Modal */
    .disclaimer-modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
    .disclaimer-modal { background: var(--bg-secondary); border: 2px solid var(--accent); border-radius: 12px; width: 100%; max-width: 500px; overflow: hidden; box-shadow: 0 10px 40px rgba(248, 135, 1, 0.3); }
    .disclaimer-modal-header { display: flex; align-items: center; gap: 12px; padding: 20px; background: rgba(248, 135, 1, 0.15); border-bottom: 1px solid var(--border); }
    .disclaimer-modal-header .warning-icon { font-size: 2rem; }
    .disclaimer-modal-header h3 { margin: 0; font-size: 1.3rem; color: var(--accent); }
    .disclaimer-modal-body { padding: 20px; }
    .disclaimer-modal-body p { margin: 0 0 15px 0; color: var(--text-primary); line-height: 1.6; font-size: 0.95rem; }
    .disclaimer-modal-body ul { margin: 0 0 15px 0; padding-left: 20px; color: var(--text-secondary); }
    .disclaimer-modal-body ul li { margin-bottom: 8px; line-height: 1.5; }
    .disclaimer-modal-body .highlight { color: var(--accent); font-weight: 600; }
    .disclaimer-modal-footer { display: flex; justify-content: flex-end; gap: 12px; padding: 16px 20px; background: var(--bg-tertiary); border-top: 1px solid var(--border); }
    .disclaimer-checkbox { display: flex; align-items: center; gap: 10px; margin-top: 10px; padding: 12px; background: var(--bg-input); border-radius: 6px; cursor: pointer; }
    .disclaimer-checkbox input { width: 18px; height: 18px; accent-color: var(--accent); }
    .disclaimer-checkbox label { margin: 0; cursor: pointer; color: var(--text-primary); font-size: 0.9rem; }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-brand">
      <img src="fairline_logo_mini.png" alt="Fairline Logo" class="header-logo">
      <h1>Fairline <span>Klipper Config Generator</span></h1>
    </div>
    <div class="header-actions">
      <a href="https://github.com/Kanrog/klipper-config-generator" target="_blank" rel="noopener noreferrer" class="btn btn-secondary github-link">
        <svg height="18" width="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
        GitHub
      </a>
      <a href="https://github.com/Kanrog/klipper-config-generator/?tab=readme-ov-file#support-the-project" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
      ‚ù§Ô∏è Donate
    </a>
      <button class="btn btn-reset" onclick="resetForm()">üîÑ Reset</button>
      <button class="btn btn-primary" onclick="showDisclaimerModal()">‚ö° Generate</button>
      <button class="btn btn-secondary" onclick="download()">üíæ Download</button>
    </div>
  </div>
  
  <div class="main-container">
    <div class="left-column">
      <div class="panel">
        <div class="panel-header"><span class="panel-title">üìã Board Selection</span></div>
        <div class="panel-body">
          <div class="form-group">
            <label>Search</label>
            <input type="text" id="boardSearch" placeholder="Filter boards..." oninput="filterBoards()">
          </div>
          <div class="form-group">
            <label>Board Config</label>
            <select id="boardSelect" onchange="loadConfigFromRepo(this.value)"><option>Loading...</option></select>
          </div>
          <label class="file-upload-label">
            <span>üìÅ Upload custom .cfg</span>
            <input type="file" accept=".cfg" onchange="handleFileUpload(event)">
          </label>
          <div id="uploadedFileName"></div>
        </div>
      </div>
      
      <div class="panel" style="margin-top: 12px;">
        <div class="panel-header"><span class="panel-title">‚öôÔ∏è Printer Setup</span></div>
        <div class="panel-body">
          <div class="form-group">
            <label>Kinematics</label>
            <select id="kinematicsSelect" onchange="updateKinematicsOptions()">
              <option value="cartesian">Cartesian (Bed Slinger)</option>
              <option value="cartesian_xy">Cartesian (Flying Gantry)</option>
              <option value="corexy">CoreXY</option>
              <option value="corexz">CoreXZ</option>
              <option value="delta">Delta</option>
              <option value="deltesian">Deltesian</option>
              <option value="polar">Polar</option>
              <option value="winch">Cable Winch</option>
            </select>
            <div class="hint" id="kinematicsHint">Y axis moves bed, X moves toolhead</div>
          </div>
          <div class="form-group">
            <label id="bedDimensionsLabel">Bed Size (X / Y / Z mm)</label>
            <div class="form-row-3" id="cartesianDimensions">
              <input type="number" id="bedX" placeholder="X" value="235">
              <input type="number" id="bedY" placeholder="Y" value="235">
              <input type="number" id="bedZ" placeholder="Z" value="250">
            </div>
            <div class="form-row" id="deltaDimensions" style="display: none;">
              <input type="number" id="deltaRadius" placeholder="Radius" value="140">
              <input type="number" id="deltaHeight" placeholder="Height" value="300">
            </div>
            <input type="hidden" id="deltaArmLength" value="270">
          </div>
          <div class="form-row" id="zMotorsGroup">
            <div class="form-group">
              <label>Z Motors</label>
              <select id="zMotorCount" onchange="updateZMotorOptions()">
                <option value="1">Single</option>
                <option value="2">Dual</option>
                <option value="3">Triple</option>
                <option value="4">Quad</option>
              </select>
            </div>
            <div class="form-group" id="zTiltOptions" style="display: none;">
              <label>Z Leveling</label>
              <select id="zLevelingType">
                <option value="none">None</option>
                <option value="z_tilt">Z Tilt</option>
              </select>
            </div>
            <div class="form-group" id="quadGantryOptions" style="display: none;">
              <label>Leveling</label>
              <select id="quadLevelingType">
                <option value="none">None</option>
                <option value="z_tilt">Z Tilt</option>
                <option value="quad_gantry_level">QGL</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <div class="panel" style="margin-top: 12px;">
        <div class="panel-header"><span class="panel-title">üéØ Endstops & Homing</span></div>
        <div class="panel-body">
          <div class="form-row" id="xyEndstopOptions">
            <div class="form-group">
              <label>X Endstop</label>
              <select id="endstopX"><option value="min">Min (0)</option><option value="max">Max</option></select>
            </div>
            <div class="form-group">
              <label>Y Endstop</label>
              <select id="endstopY"><option value="min">Min (0)</option><option value="max">Max</option></select>
            </div>
          </div>
          <div class="form-group">
            <label>Z Endstop Type</label>
            <select id="zEndstopType" onchange="updateZEndstopOptions()">
              <option value="switch_min">Switch (Bottom)</option>
              <option value="switch_max">Switch (Top)</option>
              <option value="probe">Probe</option>
            </select>
          </div>
          <div id="probeOffsets" class="sub-options" style="display: none;">
            <div class="form-row">
              <div class="form-group"><label>Probe X Offset</label><input type="number" id="probeOffsetX" value="-40"></div>
              <div class="form-group"><label>Probe Y Offset</label><input type="number" id="probeOffsetY" value="-10"></div>
            </div>
          </div>
          <div class="checkbox-row">
            <input type="checkbox" id="sensorlessXY" onchange="updateSensorlessWarning()">
            <label for="sensorlessXY">Sensorless Homing (X/Y)</label>
          </div>
        </div>
      </div>
    </div>
    
    <div class="center-column">
      <div class="panel" style="flex: 1; display: flex; flex-direction: column;">
        <div class="panel-header">
          <span class="panel-title">üì¶ Config Sections</span>
          <div class="panel-actions">
            <span class="badge" id="sectionCount">0/0</span>
            <button onclick="toggleAllSections(true)">All</button>
            <button onclick="toggleAllSections(false)">None</button>
          </div>
        </div>
        <div class="panel-body" style="flex: 1; overflow: hidden;">
          <div class="sections-grid" id="sections-container">
            <div style="grid-column: 1 / -1; text-align: center; color: var(--text-secondary); padding: 40px;">Select a board to view available sections</div>
          </div>
        </div>
      </div>
      
      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">üìé Include Files</span>
          <div class="panel-actions">
            <span class="badge" id="includeCount">0</span>
            <button onclick="toggleAllIncludes(true)">All</button>
            <button onclick="toggleAllIncludes(false)">None</button>
          </div>
        </div>
        <div class="panel-body">
          <div class="includes-container">
            <div class="includes-list" id="includes-list"><div class="includes-empty">No include files added</div></div>
            <div class="include-add-panel">
              <select id="includePresetSelect" onchange="handleIncludePresetSelect(this)">
                <option value="">+ Add common include...</option>
                <option value="mainsail.cfg">mainsail.cfg</option>
                <option value="fluidd.cfg">fluidd.cfg</option>
                <option value="macros.cfg">macros.cfg</option>
                <option value="timelapse.cfg">timelapse.cfg</option>
                <option value="KAMP_Settings.cfg">KAMP_Settings.cfg</option>
                <option value="klipperscreen.cfg">klipperscreen.cfg</option>
                <option value="adxl.cfg">adxl.cfg</option>
                <option value="ebb36.cfg">ebb36.cfg</option>
                <option value="ebb42.cfg">ebb42.cfg</option>
              </select>
              <div class="include-row">
                <input type="text" id="customIncludeInput" placeholder="custom.cfg" onkeypress="handleCustomIncludeKeypress(event)">
                <button class="add-btn" onclick="handleCustomIncludeAdd()">Add</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Secondary MCUs Panel -->
      <div class="panel mcu-panel">
        <div class="panel-header">
          <span class="panel-title">üîå Secondary MCUs</span>
          <div class="panel-actions"><span class="badge" id="secondaryMcuCount">0</span></div>
        </div>
        <div class="panel-body mcu-panel-body">
          <div class="mcu-list" id="secondary-mcu-list">
            <div class="mcu-empty">No secondary MCUs added. Use the options below to add toolhead boards, expansion boards, or host MCU.</div>
          </div>
          <div class="mcu-add-panel">
            <select id="mcuPresetSelect" onchange="handleSecondaryMcuPresetSelect(this)">
              <option value="">+ Add Secondary MCU...</option>
              <optgroup label="CAN Toolhead Boards">
                <option value="ebb36-v1.2">BTT EBB36 v1.2</option>
                <option value="ebb42-v1.2">BTT EBB42 v1.2</option>
                <option value="ebb36-v1.1">BTT EBB36 v1.1</option>
                <option value="sht36">Mellow SHT36/42</option>
                <option value="duet-1lc">Duet3 1LC</option>
              </optgroup>
              <optgroup label="Expansion Boards">
                <option value="expansion">üîß Add Expansion Board...</option>
              </optgroup>
              <optgroup label="Host / Other">
                <option value="rpi">Raspberry Pi (Host MCU)</option>
                <option value="mmu">MMU/ERCF Board</option>
              </optgroup>
            </select>
            <div class="mcu-upload-row">
              <label class="file-upload-label mcu-upload">
                <span>üìÅ Upload board config</span>
                <input type="file" accept=".cfg" onchange="handleSecondaryMcuUpload(event)">
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="right-column">
      <div class="output-header">
        <span class="output-title">üìÑ printer.cfg</span>
        <button class="btn btn-sm btn-secondary" onclick="download()">üíæ Download</button>
      </div>
      <div class="output-body">
        <textarea id="output" placeholder="Click 'Generate' to create your config..."></textarea>
      </div>
    </div>
  </div>
  
  <script src="app.js"></script>
  
  <!-- Disclaimer Modal -->
  <div id="disclaimerModal" class="disclaimer-modal-overlay" style="display: none;">
    <div class="disclaimer-modal">
      <div class="disclaimer-modal-header">
        <span class="warning-icon">‚ö†Ô∏è</span>
        <h3>Use At Your Own Risk</h3>
      </div>
      <div class="disclaimer-modal-body">
        <p>This tool generates Klipper configuration files based on your selections. <span class="highlight">Please review the generated config carefully before using it on your printer.</span></p>
        <p>By proceeding, you acknowledge that:</p>
        <ul>
          <li>Incorrect configurations can damage your printer or cause safety hazards</li>
          <li>You are responsible for verifying all settings, especially stepper directions, temperatures, and limits</li>
          <li>The authors of this tool are not liable for any damage resulting from its use</li>
          <li>You should always have a fire extinguisher nearby when testing new configurations</li>
        </ul>
        <div class="disclaimer-checkbox">
          <input type="checkbox" id="disclaimerAccepted">
          <label for="disclaimerAccepted">I understand and accept the risks</label>
        </div>
      </div>
      <div class="disclaimer-modal-footer">
        <button class="btn btn-secondary" onclick="closeDisclaimerModal()">Cancel</button>
        <button class="btn btn-primary" id="generateConfirmBtn" onclick="confirmGenerate()" disabled>‚ö° Generate Config</button>
      </div>
    </div>
  </div>
  
  <script>
    // Check if user has previously accepted disclaimer in this session
    let disclaimerAcceptedSession = false;
    
    function showDisclaimerModal() {
      // If already accepted in this session, generate directly
      if (disclaimerAcceptedSession) {
        generate();
        return;
      }
      
      document.getElementById('disclaimerModal').style.display = 'flex';
      document.getElementById('disclaimerAccepted').checked = false;
      document.getElementById('generateConfirmBtn').disabled = true;
    }
    
    function closeDisclaimerModal() {
      document.getElementById('disclaimerModal').style.display = 'none';
    }
    
    function confirmGenerate() {
      if (document.getElementById('disclaimerAccepted').checked) {
        disclaimerAcceptedSession = true;
        closeDisclaimerModal();
        generate();
      }
    }
    
    // Enable/disable generate button based on checkbox
    document.getElementById('disclaimerAccepted').addEventListener('change', function() {
      document.getElementById('generateConfirmBtn').disabled = !this.checked;
    });
    
    // Close modal on overlay click
    document.getElementById('disclaimerModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeDisclaimerModal();
      }
    });
    
    // Close modal on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeDisclaimerModal();
      }
    });
  </script>
</body>
</html>
